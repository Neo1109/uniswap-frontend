{"version":3,"sources":["assets/svg/SVGArrowDown.js","components/ContextualInfo/index.js","pages/Pool/RemoveLiquidity.js"],"names":["SVGArrowDown","props","width","height","viewBox","fill","d","SummaryWrapper","styled","div","error","theme","salmonRed","doveGray","Details","concreteGray","SummaryWrapperContainer","flexRowNoWrap","royalBlue","ColoredDropup","isError","highSlippageWarning","rest","ColoredDropdown","ContextualInfo","state","showDetails","this","renderTransactionDetails","openDetailsText","closeDetailsText","contextualInfo","onClick","ReactGA","event","category","action","label","setState","prevState","renderDetails","Component","defaultProps","ALLOWED_SLIPPAGE","ethers","utils","bigNumberify","DEADLINE_FROM_NOW","GAS_MARGIN","BlueSpan","span","DownArrowBackground","DownArrow","ArrowDown","active","RemoveLiquidityOutput","RemoveLiquidityOutputText","RemoveLiquidityOutputPlus","SummaryPanel","flexColumnNoWrap","LastSummaryText","ExchangeRateWrapper","ExchangeRate","Flex","getMarketRate","reserveETH","reserveToken","decimals","inputValue","inputDecimals","outputValue","outputDecimals","invert","factor","pow","mul","getExchangeRate","calculateSlippageBounds","value","offset","minimum","sub","maximum","add","lt","constants","Zero","gt","MaxUint256","RemoveLiquidity","params","t","useTranslation","useWeb3React","library","account","chainId","addTransaction","useTransactionAdder","useState","brokenTokenWarning","setBrokenTokenWarning","useEffect","createBrowserHistory","push","window","location","pathname","poolTokenAddress","outputCurrency","setOutputCurrency","poolTokenAmount","setValue","inputError","setInputError","valueParsed","setValueParsed","i","brokenTokens","length","toLowerCase","parsedValue","parseUnits","useTokenDetails","symbol","exchangeAddress","totalPoolTokens","setTotalPoolTokens","poolTokenBalance","useAddressBalance","exchangeETHBalance","exchangeTokenBalance","urlAddedTokens","exchange","useExchangeContract","ownershipPercentage","isZero","undefined","ownershipPercentageFormatted","amountFormatter","ETHOwnShare","TokenOwnShare","ETHPer","tokenPer","ethWithdrawn","tokenWithdrawn","ethWithdrawnMin","tokenWithdrawnMin","fetchPoolTokens","useCallback","totalSupply","then","on","removeListener","ethPrice","useETHPriceInUSD","b","text","Math","min","isActive","isValid","marketRate","marketRateInverted","newOutputDetected","INITIAL_TOKENS_CONTEXT","hasOwnProperty","showCustomTokenWarning","setShowCustomTokenWarning","onDismiss","currency","title","extraText","formatBalance","extraTextClickHander","valueToSet","onCurrencySelected","onValueChange","errorMessage","selectedTokenAddress","alt","description","key","renderInput","disableTokenSelect","disableUnlock","hideBottom","renderSummary","disabled","a","async","usdTransactionSize","deadline","ceil","Date","now","estimate","removeLiquidity","estimatedGasLimit","gasLimit","calculateGasMargin","response"],"mappings":"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","file":"static/js/10.2259219e.chunk.js","sourcesContent":["import React from 'react'\n\nconst SVGArrowDown = props => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 9 10\" fill=\"currentColor\" {...props}>\n    <path\n      d=\"M5.298 0H4.24v7.911h-.075L1.256 4.932l-.717.735L4.769 10 9 5.667l-.718-.735-2.908 2.979h-.076V0z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n\nexport default SVGArrowDown\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport ReactGA from 'react-ga'\nimport { ReactComponent as Dropup } from '../../assets/images/dropup-blue.svg'\nimport { ReactComponent as Dropdown } from '../../assets/images/dropdown-blue.svg'\n\nconst SummaryWrapper = styled.div`\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.doveGray)};\n  font-size: 0.75rem;\n  text-align: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n`\n\nconst Details = styled.div`\n  background-color: ${({ theme }) => theme.concreteGray};\n  padding: 1.5rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  margin-top: 1rem;\n`\n\nconst SummaryWrapperContainer = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  color: ${({ theme }) => theme.royalBlue};\n  text-align: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  cursor: pointer;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n\n  span {\n    margin-right: 12px;\n  }\n\n  img {\n    height: 0.75rem;\n    width: 0.75rem;\n  }\n`\n\nconst WrappedDropup = ({ isError, highSlippageWarning, ...rest }) => <Dropup {...rest} />\nconst ColoredDropup = styled(WrappedDropup)`\n  path {\n    stroke: ${({ theme }) => theme.royalBlue};\n  }\n`\n\nconst WrappedDropdown = ({ isError, highSlippageWarning, ...rest }) => <Dropdown {...rest} />\nconst ColoredDropdown = styled(WrappedDropdown)`\n  path {\n    stroke: ${({ theme }) => theme.royalBlue};\n  }\n`\n\nclass ContextualInfo extends Component {\n  static propTypes = {\n    openDetailsText: PropTypes.string,\n    renderTransactionDetails: PropTypes.func,\n    contextualInfo: PropTypes.string,\n    isError: PropTypes.bool\n  }\n\n  static defaultProps = {\n    openDetailsText: 'Advanced Details',\n    closeDetailsText: 'Hide Advanced',\n    renderTransactionDetails() {},\n    contextualInfo: '',\n    isError: false\n  }\n\n  state = {\n    showDetails: false\n  }\n\n  renderDetails() {\n    if (!this.state.showDetails) {\n      return null\n    }\n\n    return <Details>{this.props.renderTransactionDetails()}</Details>\n  }\n\n  render() {\n    const { openDetailsText, closeDetailsText, contextualInfo, isError } = this.props\n\n    if (contextualInfo) {\n      return <SummaryWrapper error={isError}>{contextualInfo}</SummaryWrapper>\n    }\n\n    return (\n      <>\n        <SummaryWrapperContainer\n          onClick={() => {\n            !this.state.showDetails &&\n              ReactGA.event({\n                category: 'Advanced Interaction',\n                action: 'Open Advanced Details',\n                label: 'Pool Page Details'\n              })\n            this.setState(prevState => {\n              return { showDetails: !prevState.showDetails }\n            })\n          }}\n        >\n          {!this.state.showDetails ? (\n            <>\n              <span>{openDetailsText}</span>\n              <ColoredDropup />\n            </>\n          ) : (\n            <>\n              <span>{closeDetailsText}</span>\n              <ColoredDropdown />\n            </>\n          )}\n        </SummaryWrapperContainer>\n        {this.renderDetails()}\n      </>\n    )\n  }\n}\n\nexport default ContextualInfo\n","import React, { useState, useEffect, useCallback } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport ReactGA from 'react-ga'\nimport { createBrowserHistory } from 'history'\nimport { ethers } from 'ethers'\nimport styled from 'styled-components'\n\nimport { useWeb3React, useExchangeContract } from '../../hooks'\nimport { useTransactionAdder } from '../../contexts/Transactions'\nimport { useTokenDetails, INITIAL_TOKENS_CONTEXT } from '../../contexts/Tokens'\nimport { useAddressBalance, useETHPriceInUSD } from '../../contexts/Balances'\n\nimport { calculateGasMargin, amountFormatter } from '../../utils'\nimport { brokenTokens } from '../../constants'\n\nimport { Button } from '../../theme'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport ContextualInfo from '../../components/ContextualInfo'\nimport OversizedPanel from '../../components/OversizedPanel'\nimport ArrowDown from '../../assets/svg/SVGArrowDown'\nimport WarningCard from '../../components/WarningCard'\n\n// denominated in bips\nconst ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(200)\n\n// denominated in seconds\nconst DEADLINE_FROM_NOW = 60 * 15\n\n// denominated in bips\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\n\nconst BlueSpan = styled.span`\n  color: ${({ theme }) => theme.royalBlue};\n`\n\nconst DownArrowBackground = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  justify-content: center;\n  align-items: center;\n`\n\nconst DownArrow = styled(ArrowDown)`\n  ${({ theme }) => theme.flexRowNoWrap}\n  color: ${({ theme, active }) => (active ? theme.royalBlue : theme.doveGray)};\n  width: 0.625rem;\n  height: 0.625rem;\n  position: relative;\n  padding: 0.875rem;\n`\n\nconst RemoveLiquidityOutput = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  min-height: 3.5rem;\n`\n\nconst RemoveLiquidityOutputText = styled.div`\n  font-size: 1.25rem;\n  line-height: 1.5rem;\n  padding: 1rem 0.75rem;\n`\n\nconst RemoveLiquidityOutputPlus = styled.div`\n  font-size: 1.25rem;\n  line-height: 1.5rem;\n  padding: 1rem 0;\n`\n\nconst SummaryPanel = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  padding: 1rem 0;\n`\n\nconst LastSummaryText = styled.div`\n  margin-top: 1rem;\n`\n\nconst ExchangeRateWrapper = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  align-items: center;\n  color: ${({ theme }) => theme.doveGray};\n  font-size: 0.75rem;\n  padding: 0.25rem 1rem 0;\n`\n\nconst ExchangeRate = styled.span`\n  flex: 1 1 auto;\n  width: 0;\n  color: ${({ theme }) => theme.doveGray};\n`\n\nconst Flex = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 2rem;\n\n  button {\n    max-width: 20rem;\n  }\n`\n\nfunction getExchangeRate(inputValue, inputDecimals, outputValue, outputDecimals, invert = false) {\n  try {\n    if (\n      inputValue &&\n      (inputDecimals || inputDecimals === 0) &&\n      outputValue &&\n      (outputDecimals || outputDecimals === 0)\n    ) {\n      const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\n\n      if (invert) {\n        return inputValue\n          .mul(factor)\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\n          .div(outputValue)\n      } else {\n        return outputValue\n          .mul(factor)\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\n          .div(inputValue)\n      }\n    }\n  } catch {}\n}\n\nfunction getMarketRate(reserveETH, reserveToken, decimals, invert = false) {\n  return getExchangeRate(reserveETH, 18, reserveToken, decimals, invert)\n}\n\nfunction calculateSlippageBounds(value) {\n  if (value) {\n    const offset = value.mul(ALLOWED_SLIPPAGE).div(ethers.utils.bigNumberify(10000))\n    const minimum = value.sub(offset)\n    const maximum = value.add(offset)\n    return {\n      minimum: minimum.lt(ethers.constants.Zero) ? ethers.constants.Zero : minimum,\n      maximum: maximum.gt(ethers.constants.MaxUint256) ? ethers.constants.MaxUint256 : maximum\n    }\n  } else {\n    return {}\n  }\n}\n\nexport default function RemoveLiquidity({ params }) {\n  const { t } = useTranslation()\n  const { library, account, active, chainId } = useWeb3React()\n\n  const addTransaction = useTransactionAdder()\n\n  const [brokenTokenWarning, setBrokenTokenWarning] = useState()\n\n  // clear url of query\n  useEffect(() => {\n    const history = createBrowserHistory()\n    history.push(window.location.pathname + '')\n  }, [])\n\n  const [outputCurrency, setOutputCurrency] = useState(params.poolTokenAddress)\n  const [value, setValue] = useState(params.poolTokenAmount ? params.poolTokenAmount : '')\n  const [inputError, setInputError] = useState()\n  const [valueParsed, setValueParsed] = useState()\n\n  useEffect(() => {\n    setBrokenTokenWarning(false)\n    for (let i = 0; i < brokenTokens.length; i++) {\n      if (brokenTokens[i].toLowerCase() === outputCurrency.toLowerCase()) {\n        setBrokenTokenWarning(true)\n      }\n    }\n  }, [outputCurrency])\n\n  // parse value\n  useEffect(() => {\n    try {\n      const parsedValue = ethers.utils.parseUnits(value, 18)\n      setValueParsed(parsedValue)\n    } catch {\n      if (value !== '') {\n        setInputError(t('inputNotValid'))\n      }\n    }\n\n    return () => {\n      setInputError()\n      setValueParsed()\n    }\n  }, [t, value])\n\n  const { symbol, decimals, exchangeAddress } = useTokenDetails(outputCurrency)\n\n  const [totalPoolTokens, setTotalPoolTokens] = useState()\n  const poolTokenBalance = useAddressBalance(account, exchangeAddress)\n  const exchangeETHBalance = useAddressBalance(exchangeAddress, 'ETH')\n  const exchangeTokenBalance = useAddressBalance(exchangeAddress, outputCurrency)\n\n  const urlAddedTokens = {}\n  if (params.poolTokenAddress) {\n    urlAddedTokens[params.poolTokenAddress] = true\n  }\n\n  // input validation\n  useEffect(() => {\n    if (valueParsed && poolTokenBalance) {\n      if (valueParsed.gt(poolTokenBalance)) {\n        setInputError(t('insufficientBalance'))\n      } else {\n        setInputError(null)\n      }\n    }\n  }, [poolTokenBalance, t, valueParsed])\n\n  const exchange = useExchangeContract(exchangeAddress)\n\n  const ownershipPercentage =\n    poolTokenBalance && totalPoolTokens && !totalPoolTokens.isZero()\n      ? poolTokenBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\n      : undefined\n  const ownershipPercentageFormatted = ownershipPercentage && amountFormatter(ownershipPercentage, 16, 4)\n\n  const ETHOwnShare =\n    exchangeETHBalance &&\n    ownershipPercentage &&\n    exchangeETHBalance.mul(ownershipPercentage).div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n  const TokenOwnShare =\n    exchangeTokenBalance &&\n    ownershipPercentage &&\n    exchangeTokenBalance.mul(ownershipPercentage).div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n\n  const ETHPer = exchangeETHBalance\n    ? exchangeETHBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n    : undefined\n  const tokenPer = exchangeTokenBalance\n    ? exchangeTokenBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n    : undefined\n\n  const ethWithdrawn =\n    ETHPer && valueParsed && totalPoolTokens && !totalPoolTokens.isZero()\n      ? ETHPer.mul(valueParsed)\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n          .div(totalPoolTokens)\n      : undefined\n  const tokenWithdrawn =\n    tokenPer && valueParsed && totalPoolTokens && !totalPoolTokens.isZero()\n      ? tokenPer\n          .mul(valueParsed)\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n          .div(totalPoolTokens)\n      : undefined\n\n  const ethWithdrawnMin = ethWithdrawn ? calculateSlippageBounds(ethWithdrawn).minimum : undefined\n  const tokenWithdrawnMin = tokenWithdrawn ? calculateSlippageBounds(tokenWithdrawn).minimum : undefined\n\n  const fetchPoolTokens = useCallback(() => {\n    if (exchange) {\n      exchange.totalSupply().then(totalSupply => {\n        setTotalPoolTokens(totalSupply)\n      })\n    }\n  }, [exchange])\n  useEffect(() => {\n    fetchPoolTokens()\n    library.on('block', fetchPoolTokens)\n\n    return () => {\n      library.removeListener('block', fetchPoolTokens)\n    }\n  }, [fetchPoolTokens, library])\n\n  // BigNumber.js instance\n  const ethPrice = useETHPriceInUSD()\n\n  async function onRemoveLiquidity() {\n    // take ETH amount, multiplied by ETH rate and 2 for total tx size\n    let usdTransactionSize = ethPrice * (ethWithdrawn / 1e18) * 2\n    ReactGA.event({\n      category: 'Transaction',\n      action: 'Remove Liquidity',\n      label: outputCurrency,\n      value: usdTransactionSize\n    })\n\n    const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW\n\n    const estimatedGasLimit = await exchange.estimate.removeLiquidity(\n      valueParsed,\n      ethWithdrawnMin,\n      tokenWithdrawnMin,\n      deadline\n    )\n\n    exchange\n      .removeLiquidity(valueParsed, ethWithdrawnMin, tokenWithdrawnMin, deadline, {\n        gasLimit: calculateGasMargin(estimatedGasLimit, GAS_MARGIN)\n      })\n      .then(response => {\n        addTransaction(response)\n      })\n  }\n\n  const b = text => <BlueSpan>{text}</BlueSpan>\n\n  function renderTransactionDetails() {\n    return (\n      <div>\n        <div>\n          {t('youAreRemoving')} {b(`${amountFormatter(ethWithdrawn, 18, 4)} ETH`)} {t('and')}{' '}\n          {b(`${amountFormatter(tokenWithdrawn, decimals, Math.min(decimals, 4))} ${symbol}`)} {t('outPool')}\n        </div>\n        <LastSummaryText>\n          {t('youWillRemove')} {b(amountFormatter(valueParsed, 18, 4))} {t('liquidityTokens')}\n        </LastSummaryText>\n        <LastSummaryText>\n          {t('totalSupplyIs')} {b(amountFormatter(totalPoolTokens, 18, 4))}\n        </LastSummaryText>\n        <LastSummaryText>\n          {t('tokenWorth')} {b(amountFormatter(ETHPer.div(totalPoolTokens), 18, 4))} ETH {t('and')}{' '}\n          {b(amountFormatter(tokenPer.div(totalPoolTokens), decimals, Math.min(4, decimals)))} {symbol}\n        </LastSummaryText>\n      </div>\n    )\n  }\n\n  function renderSummary() {\n    let contextualInfo = ''\n    let isError = false\n    if (brokenTokenWarning) {\n      contextualInfo = t('brokenToken')\n      isError = true\n    } else if (inputError) {\n      contextualInfo = inputError\n      isError = true\n    } else if (!outputCurrency || outputCurrency === 'ETH') {\n      contextualInfo = t('selectTokenCont')\n    } else if (!valueParsed) {\n      contextualInfo = t('enterValueCont')\n    } else if (!account) {\n      contextualInfo = t('noWallet')\n      isError = true\n    }\n\n    return (\n      <ContextualInfo\n        key=\"context-info\"\n        openDetailsText={t('transactionDetails')}\n        closeDetailsText={t('hideDetails')}\n        contextualInfo={contextualInfo}\n        isError={isError}\n        renderTransactionDetails={renderTransactionDetails}\n      />\n    )\n  }\n\n  function formatBalance(value) {\n    return `Balance: ${value}`\n  }\n\n  const isActive = active && account\n  const isValid = inputError === null\n\n  const marketRate = getMarketRate(exchangeETHBalance, exchangeTokenBalance, decimals)\n  const marketRateInverted = getMarketRate(exchangeTokenBalance, exchangeETHBalance, decimals)\n\n  const newOutputDetected =\n    outputCurrency !== 'ETH' && outputCurrency && !INITIAL_TOKENS_CONTEXT[chainId].hasOwnProperty(outputCurrency)\n\n  const [showCustomTokenWarning, setShowCustomTokenWarning] = useState(false)\n\n  useEffect(() => {\n    if (newOutputDetected) {\n      setShowCustomTokenWarning(true)\n    } else {\n      setShowCustomTokenWarning(false)\n    }\n  }, [newOutputDetected])\n\n  return (\n    <>\n      {showCustomTokenWarning && (\n        <WarningCard\n          onDismiss={() => {\n            setShowCustomTokenWarning(false)\n          }}\n          urlAddedTokens={urlAddedTokens}\n          currency={outputCurrency}\n        />\n      )}\n      <CurrencyInputPanel\n        title={t('poolTokens')}\n        extraText={poolTokenBalance && formatBalance(amountFormatter(poolTokenBalance, 18, 4))}\n        extraTextClickHander={() => {\n          if (poolTokenBalance) {\n            const valueToSet = poolTokenBalance\n            if (valueToSet.gt(ethers.constants.Zero)) {\n              setValue(amountFormatter(valueToSet, 18, 18, false))\n            }\n          }\n        }}\n        urlAddedTokens={urlAddedTokens}\n        onCurrencySelected={setOutputCurrency}\n        onValueChange={setValue}\n        value={value}\n        errorMessage={inputError}\n        selectedTokenAddress={outputCurrency}\n      />\n      <OversizedPanel>\n        <DownArrowBackground>\n          <DownArrow active={isActive} alt=\"arrow\" />\n        </DownArrowBackground>\n      </OversizedPanel>\n      <CurrencyInputPanel\n        title={t('output')}\n        description={!!(ethWithdrawn && tokenWithdrawn) ? `(${t('estimated')})` : ''}\n        key=\"remove-liquidity-input\"\n        renderInput={() =>\n          !!(ethWithdrawn && tokenWithdrawn) ? (\n            <RemoveLiquidityOutput>\n              <RemoveLiquidityOutputText>\n                {`${amountFormatter(ethWithdrawn, 18, 4, false)} ETH`}\n              </RemoveLiquidityOutputText>\n              <RemoveLiquidityOutputPlus> + </RemoveLiquidityOutputPlus>\n              <RemoveLiquidityOutputText>\n                {`${amountFormatter(tokenWithdrawn, decimals, Math.min(4, decimals))} ${symbol}`}\n              </RemoveLiquidityOutputText>\n            </RemoveLiquidityOutput>\n          ) : (\n            <RemoveLiquidityOutput />\n          )\n        }\n        disableTokenSelect\n        disableUnlock\n      />\n      <OversizedPanel key=\"remove-liquidity-input-under\" hideBottom>\n        <SummaryPanel>\n          <ExchangeRateWrapper>\n            <ExchangeRate>{t('exchangeRate')}</ExchangeRate>\n            {marketRate ? <span>{`1 ETH = ${amountFormatter(marketRate, 18, 7)} ${symbol}`}</span> : ' - '}\n          </ExchangeRateWrapper>\n          <ExchangeRateWrapper>\n            <ExchangeRate>{t('invertedRate')}</ExchangeRate>\n            {marketRate ? <span>{`1 ${symbol} = ${amountFormatter(marketRateInverted, 18, 7)} ETH`}</span> : ' - '}\n          </ExchangeRateWrapper>\n          <ExchangeRateWrapper>\n            <ExchangeRate>{t('currentPoolSize')}</ExchangeRate>\n            {exchangeETHBalance && exchangeTokenBalance && (decimals || decimals === 0) ? (\n              <span>{`${amountFormatter(exchangeETHBalance, 18, 4)} ETH + ${amountFormatter(\n                exchangeTokenBalance,\n                decimals,\n                Math.min(decimals, 4)\n              )} ${symbol}`}</span>\n            ) : (\n              ' - '\n            )}\n          </ExchangeRateWrapper>\n          <ExchangeRateWrapper>\n            <ExchangeRate>\n              {t('yourPoolShare')} ({ownershipPercentageFormatted && ownershipPercentageFormatted}%)\n            </ExchangeRate>\n            {ETHOwnShare && TokenOwnShare ? (\n              <span>\n                {`${amountFormatter(ETHOwnShare, 18, 4)} ETH + ${amountFormatter(\n                  TokenOwnShare,\n                  decimals,\n                  Math.min(decimals, 4)\n                )} ${symbol}`}\n              </span>\n            ) : (\n              ' - '\n            )}\n          </ExchangeRateWrapper>\n        </SummaryPanel>\n      </OversizedPanel>\n      {renderSummary()}\n      <Flex>\n        <Button disabled={!isValid} onClick={onRemoveLiquidity}>\n          {t('removeLiquidity')}\n        </Button>\n      </Flex>\n    </>\n  )\n}\n"],"sourceRoot":""}